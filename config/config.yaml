# OrbyGlasses Config - Simple Settings

# Camera Settings
camera:
  source: 0       # 0 = webcam, or URL for IP camera
  width: 640      # Resolution width
  height: 480     # Resolution height
  fps: 30         # Frames per second

# AI Models
models:
  # Object Detection (YOLOv11n - 2024)
  yolo:
    path: "models/yolo/yolo11n.pt"
    confidence: 0.6
    iou_threshold: 0.45
    device: "mps"  # Use "cuda" for NVIDIA, "cpu" for CPU
    half_precision: true

  # Depth Sensing (Apple Depth Pro - 2024)
  depth:
    path: "apple/DepthPro-hf"  # Sharpest depth available
    device: "mps"
    half_precision: false
    max_resolution: 518

  # Audio Narration (Optional)
  llm:
    primary: "gemma3:4b"
    vision: "moondream:latest"
    temperature: 0.6
    max_tokens: 100
    vlm_enabled: false  # Disabled (too slow)
    scene_analysis_interval: 30

# Voice Commands (Optional)
conversation:
  enabled: false  # Turn on for voice control
  model: "gemma3:4b"
  temperature: 0.7
  max_tokens: 200
  voice_input: true
  activation_phrase: "hey orby"
  check_interval: 1.0
  simple_commands: true
  command_phrases:
    - "what's around me"
    - "is the path clear"
    - "where am I"

# Social Navigation (Optional)
social_navigation:
  enabled: true
  region: "us"  # 'us', 'uk', 'japan', etc.
  voice_announce: true

# Audio
audio:
  tts_engine: "pyttsx3"
  tts_rate: 180  # Words per minute
  tts_volume: 0.9
  echolocation_enabled: true
  spatial_audio: true
  adaptive_beaconing_enabled: true
  beacon_safe_frequency: 440
  beacon_obstacle_frequency: 880
  warning_pulse_rate: 0.2
  door_beacon: 660
  stairs_beacon: 1320
  clear_path_beacon: 330

# Echolocation
echolocation:
  room_dimensions: [10, 10, 3]  # meters
  sample_rate: 16000
  duration: 0.1

# RL Prediction (Optional)
prediction:
  enabled: false
  model_path: "models/rl/ppo_navigation.zip"
  training_steps: 10000
  save_interval: 1000

# Safety
safety:
  min_safe_distance: 1.5  # meters
  danger_distance: 1.0    # meters
  caution_distance: 2.5   # meters
  emergency_stop_key: "q"
  max_obstacle_alerts: 3

# Logging
logging:
  level: "WARNING"  # WARNING, INFO, or DEBUG
  log_file: "data/logs/orbyglass.log"
  save_detections: true
  save_frames: false

# Performance
performance:
  audio_update_interval: 2.0  # seconds
  danger_audio_interval: 0.5  # seconds
  stats_interval: 100
  max_detections: 8
  depth_skip_frames: 0  # 0 = every frame
  frame_skip: 0
  enable_multithreading: true
  cache_depth_maps: true

# 3D Mapping (Optional)
mapping3d:
  enabled: false
  max_depth: 6.0
  voxel_size: 0.15
  subsample_step: 8
  update_interval: 0.3
  fx: 500
  fy: 500
  skip_bbox: true

# SLAM - Indoor Navigation
slam:
  enabled: true
  grid_size: [300, 300]
  grid_resolution: 0.2
  save_maps: true
  visualize: false
  orb_features: 1000
  fast_threshold: 20
  min_matches: 15
  motion_model: true
  pose_smoothing: 0.7
  temporal_consistency_check: true
  max_position_jump: 0.3
  max_rotation_jump: 0.3
  min_tracked_features: 20
  keyframe_threshold: 20
  reprojection_threshold: 3.0
  min_depth: 0.1
  max_depth: 10.0
  loop_closure: false
  bundle_adjustment: false

# Indoor Navigation
indoor_navigation:
  enabled: true
  path_planning: true
  save_locations: true

# Trajectory Prediction (Optional)
trajectory_prediction:
  enabled: false
  max_history: 10
  prediction_horizon: 3
  time_step: 0.5
  visualize: false
  collision_warning: true

# 3D Occupancy Grid (Optional)
occupancy_grid_3d:
  enabled: false
  grid_size: [10.0, 10.0, 3.0]
  resolution: 0.1
  max_range: 5.0
  visualize: false

# Point Cloud (Optional)
point_cloud_viewer:
  enabled: false
  max_points: 100000
  subsample: 3
  min_depth: 0.1
  max_depth: 5.0

# Movement Visualizer (Optional)
movement_visualizer:
  enabled: false
  canvas_size: [700, 700]
  trail_length: 200
  show_stats: true
