# OrbyGlasses Configuration File
# Bio-Mimetic Navigation System for Visually Impaired Users

# Camera/Video Source Settings
camera:
  # Source: 0 for built-in webcam, or URL for IP camera (e.g., "http://192.168.1.100:8080/video")
  source: 0
  width: 320  # Smaller size for better performance
  height: 320  # Smaller size for better performance
  fps: 20  # Target FPS

# Model Settings
models:
  # YOLO Object Detection
  yolo:
    path: "models/yolo/yolo11n.pt"
    confidence: 0.65       # High confidence = fewer false positives
    iou_threshold: 0.45    # IoU threshold for NMS
    device: "mps"          # Device: 'mps' (Apple Silicon), 'cuda', or 'cpu'

  # Depth Estimation
  depth:
    path: "models/depth/depth_pro.pt"
    device: "mps"

  # LLM for Narrative Generation
  llm:
    primary: "gemma3:4b"        # Primary model for narrative
    vision: "moondream:latest"  # Vision model for scene understanding
    temperature: 0.7            # Sampling temperature (0-1)
    max_tokens: 150             # Maximum tokens to generate

# Audio Settings
audio:
  # Text-to-Speech
  tts_engine: "pyttsx3"
  tts_rate: 180              # Words per minute (clear and understandable)
  tts_volume: 0.9            # Volume (0-1)

  # Echolocation/Spatial Audio
  echolocation_enabled: false  # Disabled for maximum speed
  spatial_audio: false

# Echolocation Simulation Settings
echolocation:
  # Virtual room dimensions [x, y, z] in meters
  room_dimensions: [10, 10, 3]
  sample_rate: 16000         # Audio sample rate in Hz
  duration: 0.1              # Duration of each beep in seconds

# Reinforcement Learning Prediction
prediction:
  enabled: false  # Disabled for better performance - enable after testing
  model_path: "models/rl/ppo_navigation.zip"
  training_steps: 10000      # Steps for initial training
  save_interval: 1000        # Save checkpoint every N steps

# Safety Settings
safety:
  min_safe_distance: 1.5     # Minimum safe distance in meters
  danger_distance: 0.7       # Immediate danger zone (<0.7m) - reduced to avoid false alerts
  caution_distance: 2.0      # Caution zone (0.7-2m)
  emergency_stop_key: "q"    # Key to emergency stop
  max_obstacle_alerts: 3     # Maximum simultaneous obstacle alerts

# Logging Settings
logging:
  level: "INFO"              # DEBUG, INFO, WARNING, ERROR, CRITICAL
  log_file: "data/logs/orbyglass.log"
  save_detections: true      # Log detection data for analysis
  save_frames: false         # Save frames (uses lots of space)

# Performance Tuning
performance:
  audio_update_interval: 5.0      # Seconds between audio updates (ensures sentences complete)
  danger_audio_interval: 2.0      # Faster alerts for danger zone objects
  stats_interval: 100             # Log stats every N frames
  max_detections: 3               # Focus on top 3 most relevant objects
  depth_skip_frames: 3            # Calculate depth every Nth frame (3 = every 4th frame)

# 3D Mapping Settings
mapping3d:
  enabled: true                   # Enable 3D real-time mapping visualization (set to true to enable)
  max_depth: 10.0                 # Maximum depth in meters to visualize
  voxel_size: 0.1                 # Voxel size for downsampling (larger = faster, less detail)
  subsample_step: 8               # Subsample every Nth point (higher = faster, less detail)
  update_interval: 0.3            # Update 3D map every N seconds (slower updates = better performance)
  fx: 500                         # Camera focal length X (pixels)
  fy: 500                         # Camera focal length Y (pixels)
  skip_bbox: true                 # Skip bounding boxes for better performance
